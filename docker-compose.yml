services:
  detector:
    container_name: vizoid-detector
    build:
      context: ./server
      dockerfile: Dockerfile
    ports: ["7860:7860"]
    volumes:
      - ./server/out:/app/out
    deploy: {}
    # For NVIDIA GPU (requires nvidia-container-toolkit installed):
    # runtime: nvidia
    # environment:
    #   - NVIDIA_VISIBLE_DEVICES=all
    #   - NVIDIA_DRIVER_CAPABILITIES=compute,utility
